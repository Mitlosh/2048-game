{"mappings":"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","sources":["<anon>","src/scripts/main.js","src/modules/Game.class.js"],"sourcesContent":["\"use strict\";\nvar $a5fd07fa01589658$exports = {};\n\"use strict\";\n/**\n * This class represents the game.\n * Now it has a basic structure, that is needed for testing.\n * Feel free to add more props and methods if needed.\n */ class $a5fd07fa01589658$var$Game {\n    /**\n   * Creates a new game instance.\n   *\n   * @param {number[][]} initialState\n   * The initial state of the board.\n   * @default\n   * [[0, 0, 0, 0],\n   *  [0, 0, 0, 0],\n   *  [0, 0, 0, 0],\n   *  [0, 0, 0, 0]]\n   *\n   * If passed, the board will be initialized with the provided\n   * initial state.\n   */ constructor(initialState){\n        this.score = 0;\n        this.status = \"playing\";\n        this.highscore = Number(localStorage.getItem(\"highscore\")) || 0;\n        if (initialState) this.board = initialState.map((row)=>row.slice());\n        else this.start();\n    }\n    _updateHighscore() {\n        if (this.score > this.highscore) {\n            this.highscore = this.score;\n            localStorage.setItem(\"highscore\", this.highscore);\n        }\n    }\n    // Add Random Tile on the board\n    _addRandomTile() {\n        const emptyCells = [];\n        for(let i = 0; i < this.board.length; i++){\n            for(let j = 0; j < this.board[i].length; j++)if (this.board[i][j] === 0) emptyCells.push([\n                i,\n                j\n            ]);\n        }\n        if (emptyCells.length === 0) return;\n        const [row, col] = emptyCells[Math.floor(Math.random() * emptyCells.length)];\n        const newValue = Math.random() < 0.9 ? 2 : 4;\n        this.board[row][col] = newValue;\n    }\n    // Merge Row\n    _slideAndMergeRow(row) {\n        const nonZero = row.filter((x)=>x !== 0);\n        for(let i = 0; i < nonZero.length; i++)if (nonZero[i] === nonZero[i + 1]) {\n            nonZero[i] *= 2;\n            nonZero[i + 1] = 0;\n            this.score += nonZero[i];\n            this._updateHighscore();\n        }\n        const merged = nonZero.filter((x)=>x !== 0);\n        while(merged.length < 4)merged.push(0);\n        return merged;\n    }\n    // Check if two arrays are equal\n    arraysEqual(a, b) {\n        return a.length === b.length && a.every((v, i)=>v === b[i]);\n    }\n    // Transpose Matrix\n    transpose(matrix = this.board) {\n        return matrix[0].map((_, colIndex)=>matrix.map((row)=>row[colIndex]));\n    }\n    move(direction) {\n        const oldBoard = this.getState();\n        let newBoard;\n        switch(direction){\n            case \"left\":\n                newBoard = this._moveLeftInternal();\n                break;\n            case \"right\":\n                newBoard = this._reverseBoard();\n                newBoard = this._moveLeftInternal(newBoard);\n                newBoard = this._reverseBoard(newBoard);\n                break;\n            case \"up\":\n                newBoard = this.transpose();\n                newBoard = this._moveLeftInternal(newBoard);\n                newBoard = this.transpose(newBoard);\n                break;\n            case \"down\":\n                newBoard = this.transpose();\n                newBoard = this._reverseBoard(newBoard);\n                newBoard = this._moveLeftInternal(newBoard);\n                newBoard = this._reverseBoard(newBoard);\n                newBoard = this.transpose(newBoard);\n                break;\n        }\n        if (!this._boardsEqual(oldBoard, newBoard)) {\n            this.board = newBoard;\n            this._addRandomTile();\n        }\n        this.checkGameStatus();\n    }\n    moveLeft() {\n        this.move(\"left\");\n    }\n    moveRight() {\n        this.move(\"right\");\n    }\n    moveUp() {\n        this.move(\"up\");\n    }\n    moveDown() {\n        this.move(\"down\");\n    }\n    _moveLeftInternal(board = this.board) {\n        return board.map((row)=>this._slideAndMergeRow(row));\n    }\n    _reverseBoard(board = this.board) {\n        return board.map((row)=>[\n                ...row\n            ].reverse());\n    }\n    _boardsEqual(a, b) {\n        return a.every((row, i)=>this.arraysEqual(row, b[i]));\n    }\n    /**\n   * @returns {number}\n   */ getScore() {\n        return this.score;\n    }\n    /**\n   * @returns {number[][]}\n   */ getState() {\n        return this.board.map((row)=>row.slice());\n    }\n    getHighscore() {\n        return this.highscore;\n    }\n    /**\n   * Returns the current game status.\n   *\n   * @returns {string} One of: 'idle', 'playing', 'win', 'lose'\n   *\n   * `idle` - the game has not started yet (the initial state);\n   * `playing` - the game is in progress;\n   * `win` - the game is won;\n   * `lose` - the game is lost\n   */ getStatus() {\n        return this.status;\n    }\n    checkGameStatus() {\n        if (this.checkGameOver()) this.status = \"lose\";\n        else if (this.checkGameWin()) this.status = \"win\";\n    }\n    /**\n   * Starts the game.\n   */ start() {\n        this.board = Array(4).fill().map(()=>Array(4).fill(0));\n        this.score = 0;\n        this.status = \"playing\";\n        this._addRandomTile();\n        this._addRandomTile();\n    }\n    /**\n   * Resets the game.\n   */ restart() {\n        this.start();\n    }\n    checkGameWin() {\n        return this.board.some((row)=>row.includes(2048));\n    }\n    checkGameOver() {\n        if (this.board.flat().includes(0)) return false;\n        for(let i = 0; i < 4; i++)for(let j = 0; j < 4; j++){\n            const current = this.board[i][j];\n            if (i < 3 && this.board[i + 1][j] === current || j < 3 && this.board[i][j + 1] === current) return false;\n        }\n        return true;\n    }\n}\n$a5fd07fa01589658$exports = $a5fd07fa01589658$var$Game;\n\n\nconst $09e991522ca7e64e$var$game = new $a5fd07fa01589658$exports();\nlet $09e991522ca7e64e$var$isAnimating = false;\nlet $09e991522ca7e64e$var$startX = 0;\nlet $09e991522ca7e64e$var$startY = 0;\nlet $09e991522ca7e64e$var$endX = 0;\nlet $09e991522ca7e64e$var$endY = 0;\nconst $09e991522ca7e64e$var$SWIPE_THRESHOLD = 30;\nconst $09e991522ca7e64e$var$cells = document.querySelectorAll(\".field-cell\");\nconst $09e991522ca7e64e$var$startBtn = document.querySelector(\".button.start\");\nconst $09e991522ca7e64e$var$scoreEl = document.querySelector(\".game-score\");\nconst $09e991522ca7e64e$var$bestScoreEl = document.querySelector(\".best-score\");\nconst $09e991522ca7e64e$var$messageLose = document.querySelector(\".message-lose\");\nconst $09e991522ca7e64e$var$messageWin = document.querySelector(\".message-win\");\nconst $09e991522ca7e64e$var$messageStart = document.querySelector(\".message-start\");\nconst $09e991522ca7e64e$var$boardEl = document.querySelector(\".game-field\");\nfunction $09e991522ca7e64e$var$updateStartButton() {\n    $09e991522ca7e64e$var$startBtn.classList.remove(\"start\");\n    $09e991522ca7e64e$var$startBtn.classList.add(\"restart\");\n    $09e991522ca7e64e$var$startBtn.textContent = \"Restart\";\n    $09e991522ca7e64e$var$messageStart.classList.add(\"hidden\");\n}\nfunction $09e991522ca7e64e$var$hideMessages() {\n    $09e991522ca7e64e$var$messageWin.classList.add(\"hidden\");\n    $09e991522ca7e64e$var$messageLose.classList.add(\"hidden\");\n}\nfunction $09e991522ca7e64e$var$showGameStatus() {\n    const status = $09e991522ca7e64e$var$game.getStatus();\n    if (status === \"win\") $09e991522ca7e64e$var$messageWin.classList.remove(\"hidden\");\n    if (status === \"lose\") $09e991522ca7e64e$var$messageLose.classList.remove(\"hidden\");\n}\nfunction $09e991522ca7e64e$var$render() {\n    const board = $09e991522ca7e64e$var$game.getState();\n    board.forEach((row, i)=>{\n        row.forEach((value, j)=>{\n            const index = i * 4 + j;\n            const cell = $09e991522ca7e64e$var$cells[index];\n            cell.textContent = value || \"\";\n            cell.className = \"field-cell\";\n            if (value) cell.classList.add(`field-cell--${value}`);\n        });\n    });\n    $09e991522ca7e64e$var$scoreEl.textContent = $09e991522ca7e64e$var$game.getScore();\n    $09e991522ca7e64e$var$bestScoreEl.textContent = $09e991522ca7e64e$var$game.getHighscore();\n    $09e991522ca7e64e$var$hideMessages();\n    $09e991522ca7e64e$var$showGameStatus();\n}\ndocument.addEventListener(\"keydown\", (e)=>{\n    if ($09e991522ca7e64e$var$isAnimating) return;\n    $09e991522ca7e64e$var$isAnimating = true;\n    setTimeout(()=>$09e991522ca7e64e$var$isAnimating = false, 100);\n    $09e991522ca7e64e$var$updateStartButton();\n    if ([\n        \"win\",\n        \"lose\"\n    ].includes($09e991522ca7e64e$var$game.getStatus())) return;\n    const actions = {\n        ArrowLeft: ()=>$09e991522ca7e64e$var$game.moveLeft(),\n        ArrowRight: ()=>$09e991522ca7e64e$var$game.moveRight(),\n        ArrowUp: ()=>$09e991522ca7e64e$var$game.moveUp(),\n        ArrowDown: ()=>$09e991522ca7e64e$var$game.moveDown()\n    };\n    const action = actions[e.key];\n    if (!action) return;\n    action();\n    $09e991522ca7e64e$var$render();\n});\nfunction $09e991522ca7e64e$var$handleSwipe(dx, dy) {\n    $09e991522ca7e64e$var$updateStartButton();\n    if ([\n        \"win\",\n        \"lose\"\n    ].includes($09e991522ca7e64e$var$game.getStatus())) return;\n    if (Math.abs(dx) > Math.abs(dy)) {\n        if (dx > $09e991522ca7e64e$var$SWIPE_THRESHOLD) $09e991522ca7e64e$var$game.moveRight();\n        else if (dx < -$09e991522ca7e64e$var$SWIPE_THRESHOLD) $09e991522ca7e64e$var$game.moveLeft();\n    } else {\n        if (dy > $09e991522ca7e64e$var$SWIPE_THRESHOLD) $09e991522ca7e64e$var$game.moveDown();\n        else if (dy < -$09e991522ca7e64e$var$SWIPE_THRESHOLD) $09e991522ca7e64e$var$game.moveUp();\n    }\n    $09e991522ca7e64e$var$render();\n}\n// Touch\n$09e991522ca7e64e$var$boardEl.addEventListener(\"touchstart\", (e)=>{\n    e.preventDefault();\n    const touch = e.touches[0];\n    $09e991522ca7e64e$var$startX = touch.clientX;\n    $09e991522ca7e64e$var$startY = touch.clientY;\n}, {\n    passive: false\n});\n$09e991522ca7e64e$var$boardEl.addEventListener(\"touchend\", (e)=>{\n    e.preventDefault();\n    const touch = e.changedTouches[0];\n    $09e991522ca7e64e$var$endX = touch.clientX;\n    $09e991522ca7e64e$var$endY = touch.clientY;\n    $09e991522ca7e64e$var$handleSwipe($09e991522ca7e64e$var$endX - $09e991522ca7e64e$var$startX, $09e991522ca7e64e$var$endY - $09e991522ca7e64e$var$startY);\n}, {\n    passive: false\n});\n// Mouse\nlet $09e991522ca7e64e$var$isMouseDown = false;\n$09e991522ca7e64e$var$boardEl.addEventListener(\"mousedown\", (e)=>{\n    $09e991522ca7e64e$var$isMouseDown = true;\n    $09e991522ca7e64e$var$startX = e.clientX;\n    $09e991522ca7e64e$var$startY = e.clientY;\n});\n$09e991522ca7e64e$var$boardEl.addEventListener(\"mouseup\", (e)=>{\n    if (!$09e991522ca7e64e$var$isMouseDown) return;\n    $09e991522ca7e64e$var$isMouseDown = false;\n    $09e991522ca7e64e$var$endX = e.clientX;\n    $09e991522ca7e64e$var$endY = e.clientY;\n    $09e991522ca7e64e$var$handleSwipe($09e991522ca7e64e$var$endX - $09e991522ca7e64e$var$startX, $09e991522ca7e64e$var$endY - $09e991522ca7e64e$var$startY);\n});\n$09e991522ca7e64e$var$startBtn.addEventListener(\"click\", ()=>{\n    $09e991522ca7e64e$var$updateStartButton();\n    $09e991522ca7e64e$var$game.start();\n    $09e991522ca7e64e$var$render();\n});\n$09e991522ca7e64e$var$render();\n\n\n//# sourceMappingURL=index.9af1d590.js.map\n","'use strict';\n\nconst Game = require('../modules/Game.class');\n\nconst game = new Game();\nlet isAnimating = false;\nlet startX = 0;\nlet startY = 0;\nlet endX = 0;\nlet endY = 0;\nconst SWIPE_THRESHOLD = 30;\n\nconst cells = document.querySelectorAll('.field-cell');\nconst startBtn = document.querySelector('.button.start');\nconst scoreEl = document.querySelector('.game-score');\nconst bestScoreEl = document.querySelector('.best-score');\nconst messageLose = document.querySelector('.message-lose');\nconst messageWin = document.querySelector('.message-win');\nconst messageStart = document.querySelector('.message-start');\nconst boardEl = document.querySelector('.game-field');\n\nfunction updateStartButton() {\n  startBtn.classList.remove('start');\n  startBtn.classList.add('restart');\n  startBtn.textContent = 'Restart';\n  messageStart.classList.add('hidden');\n}\n\nfunction hideMessages() {\n  messageWin.classList.add('hidden');\n  messageLose.classList.add('hidden');\n}\n\nfunction showGameStatus() {\n  const status = game.getStatus();\n\n  if (status === 'win') messageWin.classList.remove('hidden');\n  if (status === 'lose') messageLose.classList.remove('hidden');\n}\n\nfunction render() {\n  const board = game.getState();\n\n  board.forEach((row, i) => {\n    row.forEach((value, j) => {\n      const index = i * 4 + j;\n      const cell = cells[index];\n\n      cell.textContent = value || '';\n      cell.className = 'field-cell';\n      if (value) cell.classList.add(`field-cell--${value}`);\n    });\n  });\n\n  scoreEl.textContent = game.getScore();\n  bestScoreEl.textContent = game.getHighscore();\n\n  hideMessages();\n  showGameStatus();\n}\n\ndocument.addEventListener('keydown', (e) => {\n  if (isAnimating) return;\n  isAnimating = true;\n  setTimeout(() => (isAnimating = false), 100);\n\n  updateStartButton();\n  if (['win', 'lose'].includes(game.getStatus())) return;\n\n  const actions = {\n    ArrowLeft: () => game.moveLeft(),\n    ArrowRight: () => game.moveRight(),\n    ArrowUp: () => game.moveUp(),\n    ArrowDown: () => game.moveDown(),\n  };\n\n  const action = actions[e.key];\n  if (!action) return;\n\n  action();\n  render();\n});\n\nfunction handleSwipe(dx, dy) {\n  updateStartButton();\n  if (['win', 'lose'].includes(game.getStatus())) return;\n\n  if (Math.abs(dx) > Math.abs(dy)) {\n    if (dx > SWIPE_THRESHOLD) game.moveRight();\n    else if (dx < -SWIPE_THRESHOLD) game.moveLeft();\n  } else {\n    if (dy > SWIPE_THRESHOLD) game.moveDown();\n    else if (dy < -SWIPE_THRESHOLD) game.moveUp();\n  }\n\n  render();\n}\n\n// Touch\nboardEl.addEventListener(\n  'touchstart',\n  (e) => {\n    e.preventDefault();\n    const touch = e.touches[0];\n    startX = touch.clientX;\n    startY = touch.clientY;\n  },\n  { passive: false },\n);\n\nboardEl.addEventListener(\n  'touchend',\n  (e) => {\n    e.preventDefault();\n    const touch = e.changedTouches[0];\n    endX = touch.clientX;\n    endY = touch.clientY;\n    handleSwipe(endX - startX, endY - startY);\n  },\n  { passive: false },\n);\n\n// Mouse\nlet isMouseDown = false;\n\nboardEl.addEventListener('mousedown', (e) => {\n  isMouseDown = true;\n  startX = e.clientX;\n  startY = e.clientY;\n});\n\nboardEl.addEventListener('mouseup', (e) => {\n  if (!isMouseDown) return;\n  isMouseDown = false;\n  endX = e.clientX;\n  endY = e.clientY;\n  handleSwipe(endX - startX, endY - startY);\n});\n\nstartBtn.addEventListener('click', () => {\n  updateStartButton();\n  game.start();\n  render();\n});\n\nrender();\n","'use strict';\n\n/**\n * This class represents the game.\n * Now it has a basic structure, that is needed for testing.\n * Feel free to add more props and methods if needed.\n */\nclass Game {\n  /**\n   * Creates a new game instance.\n   *\n   * @param {number[][]} initialState\n   * The initial state of the board.\n   * @default\n   * [[0, 0, 0, 0],\n   *  [0, 0, 0, 0],\n   *  [0, 0, 0, 0],\n   *  [0, 0, 0, 0]]\n   *\n   * If passed, the board will be initialized with the provided\n   * initial state.\n   */\n  constructor(initialState) {\n    this.score = 0;\n    this.status = 'playing';\n    this.highscore = Number(localStorage.getItem('highscore')) || 0;\n\n    if (initialState) {\n      this.board = initialState.map((row) => row.slice());\n    } else {\n      this.start();\n    }\n  }\n\n  _updateHighscore() {\n    if (this.score > this.highscore) {\n      this.highscore = this.score;\n      localStorage.setItem('highscore', this.highscore);\n    }\n  }\n  // Add Random Tile on the board\n  _addRandomTile() {\n    const emptyCells = [];\n\n    for (let i = 0; i < this.board.length; i++) {\n      for (let j = 0; j < this.board[i].length; j++) {\n        if (this.board[i][j] === 0) {\n          emptyCells.push([i, j]);\n        }\n      }\n    }\n\n    if (emptyCells.length === 0) {\n      return;\n    }\n\n    const [row, col] =\n      emptyCells[Math.floor(Math.random() * emptyCells.length)];\n    const newValue = Math.random() < 0.9 ? 2 : 4;\n\n    this.board[row][col] = newValue;\n  }\n  // Merge Row\n  _slideAndMergeRow(row) {\n    const nonZero = row.filter((x) => x !== 0);\n\n    for (let i = 0; i < nonZero.length; i++) {\n      if (nonZero[i] === nonZero[i + 1]) {\n        nonZero[i] *= 2;\n        nonZero[i + 1] = 0;\n        this.score += nonZero[i];\n        this._updateHighscore();\n      }\n    }\n\n    const merged = nonZero.filter((x) => x !== 0);\n\n    while (merged.length < 4) {\n      merged.push(0);\n    }\n\n    return merged;\n  }\n  // Check if two arrays are equal\n  arraysEqual(a, b) {\n    return a.length === b.length && a.every((v, i) => v === b[i]);\n  }\n  // Transpose Matrix\n  transpose(matrix = this.board) {\n    return matrix[0].map((_, colIndex) => matrix.map((row) => row[colIndex]));\n  }\n  move(direction) {\n    const oldBoard = this.getState();\n    let newBoard;\n\n    switch (direction) {\n      case 'left':\n        newBoard = this._moveLeftInternal();\n        break;\n\n      case 'right':\n        newBoard = this._reverseBoard();\n        newBoard = this._moveLeftInternal(newBoard);\n        newBoard = this._reverseBoard(newBoard);\n        break;\n\n      case 'up':\n        newBoard = this.transpose();\n        newBoard = this._moveLeftInternal(newBoard);\n        newBoard = this.transpose(newBoard);\n        break;\n\n      case 'down':\n        newBoard = this.transpose();\n        newBoard = this._reverseBoard(newBoard);\n        newBoard = this._moveLeftInternal(newBoard);\n        newBoard = this._reverseBoard(newBoard);\n        newBoard = this.transpose(newBoard);\n        break;\n    }\n\n    if (!this._boardsEqual(oldBoard, newBoard)) {\n      this.board = newBoard;\n      this._addRandomTile();\n    }\n\n    this.checkGameStatus();\n  }\n\n  moveLeft() {\n    this.move('left');\n  }\n  moveRight() {\n    this.move('right');\n  }\n  moveUp() {\n    this.move('up');\n  }\n  moveDown() {\n    this.move('down');\n  }\n\n  _moveLeftInternal(board = this.board) {\n    return board.map((row) => this._slideAndMergeRow(row));\n  }\n\n  _reverseBoard(board = this.board) {\n    return board.map((row) => [...row].reverse());\n  }\n\n  _boardsEqual(a, b) {\n    return a.every((row, i) => this.arraysEqual(row, b[i]));\n  }\n\n  /**\n   * @returns {number}\n   */\n  getScore() {\n    return this.score;\n  }\n\n  /**\n   * @returns {number[][]}\n   */\n  getState() {\n    return this.board.map((row) => row.slice());\n  }\n  getHighscore() {\n    return this.highscore;\n  }\n\n  /**\n   * Returns the current game status.\n   *\n   * @returns {string} One of: 'idle', 'playing', 'win', 'lose'\n   *\n   * `idle` - the game has not started yet (the initial state);\n   * `playing` - the game is in progress;\n   * `win` - the game is won;\n   * `lose` - the game is lost\n   */\n  getStatus() {\n    return this.status;\n  }\n\n  checkGameStatus() {\n    if (this.checkGameOver()) {\n      this.status = 'lose';\n    } else if (this.checkGameWin()) {\n      this.status = 'win';\n    }\n  }\n\n  /**\n   * Starts the game.\n   */\n  start() {\n    this.board = Array(4)\n      .fill()\n      .map(() => Array(4).fill(0));\n\n    this.score = 0;\n    this.status = 'playing';\n\n    this._addRandomTile();\n    this._addRandomTile();\n  }\n\n  /**\n   * Resets the game.\n   */\n  restart() {\n    this.start();\n  }\n\n  checkGameWin() {\n    return this.board.some((row) => row.includes(2048));\n  }\n  checkGameOver() {\n    if (this.board.flat().includes(0)) {\n      return false;\n    }\n\n    for (let i = 0; i < 4; i++) {\n      for (let j = 0; j < 4; j++) {\n        const current = this.board[i][j];\n\n        if (\n          (i < 3 && this.board[i + 1][j] === current) ||\n          (j < 3 && this.board[i][j + 1] === current)\n        ) {\n          return false;\n        }\n      }\n    }\n\n    return true;\n  }\n}\n\nmodule.exports = Game;\n"],"names":["$09e991522ca7e64e$var$game","constructor","initialState","score","status","highscore","Number","localStorage","getItem","board","map","row","slice","start","_updateHighscore","setItem","_addRandomTile","emptyCells","i","length","j","push","col","Math","floor","random","newValue","_slideAndMergeRow","nonZero","filter","x","merged","arraysEqual","a","b","every","v","transpose","matrix","_","colIndex","move","direction","newBoard","oldBoard","getState","_moveLeftInternal","_reverseBoard","_boardsEqual","checkGameStatus","moveLeft","moveRight","moveUp","moveDown","reverse","getScore","getHighscore","getStatus","checkGameOver","checkGameWin","Array","fill","restart","some","includes","flat","current","$09e991522ca7e64e$var$isAnimating","$09e991522ca7e64e$var$startX","$09e991522ca7e64e$var$startY","$09e991522ca7e64e$var$endX","$09e991522ca7e64e$var$endY","$09e991522ca7e64e$var$cells","document","querySelectorAll","$09e991522ca7e64e$var$startBtn","querySelector","$09e991522ca7e64e$var$scoreEl","$09e991522ca7e64e$var$bestScoreEl","$09e991522ca7e64e$var$messageLose","$09e991522ca7e64e$var$messageWin","$09e991522ca7e64e$var$messageStart","$09e991522ca7e64e$var$boardEl","$09e991522ca7e64e$var$updateStartButton","classList","remove","add","textContent","$09e991522ca7e64e$var$render","forEach","value","cell","className","$09e991522ca7e64e$var$showGameStatus","$09e991522ca7e64e$var$handleSwipe","dx","dy","abs","addEventListener","e","setTimeout","action","actions","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","key","preventDefault","touch","touches","clientX","clientY","passive","changedTouches","$09e991522ca7e64e$var$isMouseDown"],"version":3,"file":"index.9af1d590.js.map"}